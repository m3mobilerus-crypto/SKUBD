<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Конфигуратор подбора SKU</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
            padding: 10px;
            font-size: 16px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        header {
            background: #2c3e50;
            color: white;
            padding: 15px;
            text-align: center;
            position: relative;
        }

        h1 {
            margin-bottom: 10px;
            font-size: 24px;
            padding-right: 80px;
        }

        .subtitle {
            font-size: 14px;
            opacity: 0.8;
        }

        .language-switcher {
            position: absolute;
            top: 15px;
            right: 15px;
            display: flex;
            gap: 5px;
        }

        .language-switcher button {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .language-switcher button.active,
        .language-switcher button:hover {
            background: rgba(255, 255, 255, 0.4);
        }
        
        .main-content {
            padding: 20px;
        }

        .filters {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .filter-group label {
            font-weight: bold;
            font-size: 14px;
            color: #555;
        }

        .filter-group select,
        .filter-group input {
            padding: 8px;
            border-radius: 5px;
            border: 1px solid #ddd;
            font-size: 14px;
        }

        .results {
            border-top: 2px solid #ddd;
            padding-top: 20px;
        }

        .result-item {
            display: flex;
            flex-direction: column;
            gap: 10px;
            padding: 15px;
            background: #f9f9f9;
            border-radius: 8px;
            border: 1px solid #eee;
            margin-bottom: 10px;
            transition: transform 0.2s;
        }

        .result-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        .sku-label {
            font-weight: bold;
            font-size: 1.1em;
            color: #2c3e50;
        }

        .characteristics p {
            font-size: 14px;
            color: #666;
            margin: 0;
        }

        .not-found {
            text-align: center;
            color: #999;
            padding: 20px;
            font-style: italic;
        }

        .buttons-container {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            gap: 10px;
        }
        
        .buttons-container button, .reset-button {
            padding: 8px 12px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.3s;
        }

        .add-to-compare {
            background-color: #3498db;
            color: white;
        }
        .add-to-compare:hover {
            background-color: #2980b9;
        }
        
        .remove-from-compare {
            background-color: #e74c3c;
            color: white;
        }
        .remove-from-compare:hover {
            background-color: #c0392b;
        }
        
        .compare-button {
            background-color: #2ecc71;
            color: white;
        }
        .compare-button:hover {
            background-color: #27ae60;
        }
        
        .reset-button {
            background-color: #95a5a6;
            color: white;
        }
        .reset-button:hover {
            background-color: #7f8c8d;
        }

        .search-container {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            border-bottom: 1px solid #ddd;
            padding-bottom: 15px;
        }
        .search-container input {
            flex-grow: 1;
        }
        .search-container button {
            background-color: #f39c12;
            color: white;
        }
        .search-container button:hover {
            background-color: #e67e22;
        }
        
        .search-info {
            font-size: 12px;
            color: #777;
            text-align: right;
            margin-top: -10px;
            margin-bottom: 10px;
        }
        
        /* Modal styles */
        .modal {
            display: none; 
            position: fixed; 
            z-index: 1; 
            left: 0;
            top: 0;
            width: 100%; 
            height: 100%; 
            overflow: auto; 
            background-color: rgb(0,0,0); 
            background-color: rgba(0,0,0,0.4); 
            padding-top: 60px;
        }
        .modal-content {
            background-color: #fefefe;
            margin: 5% auto; 
            padding: 20px;
            border: 1px solid #888;
            width: 80%; 
            max-width: 900px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            animation-name: animatetop;
            animation-duration: 0.4s
        }
        .close-button {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }
        .close-button:hover,
        .close-button:focus {
            color: #000;
            text-decoration: none;
            cursor: pointer;
        }
        .comparison-items {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        .comparison-item {
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px;
        }
        .comparison-item h4 {
            font-size: 1em;
            margin-bottom: 10px;
            color: #2c3e50;
        }
        .comparison-item p {
            font-size: 0.9em;
            color: #555;
            margin: 5px 0;
        }

        .comparison-item .remove-button {
            background-color: #e74c3c;
            color: white;
            padding: 5px 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 10px;
        }
        .comparison-item .remove-button:hover {
            background-color: #c0392b;
        }
        
        @media (max-width: 768px) {
            .filters {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>

    <div class="container">
        <header>
            <div class="language-switcher">
                <button data-lang="ru">RU</button>
                <button data-lang="en">EN</button>
                <button data-lang="ko">KO</button>
            </div>
            <h1 id="title"></h1>
            <p class="subtitle" id="subtitle"></p>
        </header>

        <div class="main-content">
            <div class="search-container">
                <input type="text" id="sku-search-input" placeholder="Введите SKU для поиска...">
                <button id="search-button">Поиск</button>
            </div>
            <p class="search-info" id="search-info"></p>

            <div class="filters">
                <div class="filter-group">
                    <label for="model-select" id="model-label"></label>
                    <select id="model-select"></select>
                </div>
                <div class="filter-group">
                    <label for="android-select" id="android-label"></label>
                    <select id="android-select"></select>
                </div>
                <div class="filter-group">
                    <label for="scanner-select" id="scanner-label"></label>
                    <select id="scanner-select"></select>
                </div>
                <div class="filter-group">
                    <label for="memory-select" id="memory-label"></label>
                    <select id="memory-select"></select>
                </div>
                <div class="filter-group">
                    <label for="buttons-select" id="buttons-label"></label>
                    <select id="buttons-select"></select>
                </div>
                <div class="filter-group">
                    <label for="handle-select" id="handle-label"></label>
                    <select id="handle-select"></select>
                </div>
                <div class="filter-group">
                    <label for="lte-select" id="lte-label"></label>
                    <select id="lte-select"></select>
                </div>
                <div class="filter-group">
                    <label for="frost-select" id="frost-label"></label>
                    <select id="frost-select"></select>
                </div>
                
                <button id="reset-filters" class="reset-button"></button>
            </div>

            <h2 class="results-title" id="results-title"></h2>
            <div class="results" id="results"></div>
            <p class="not-found" id="not-found" style="display: none;"></p>
            <div style="text-align: center; margin-top: 20px;">
                <button id="compare-button" class="compare-button"></button>
            </div>
        </div>
    </div>

    <div id="comparison-modal" class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h2 id="comparison-title"></h2>
            <div id="comparison-items" class="comparison-items"></div>
            <button id="clear-button" class="reset-button"></button>
        </div>
    </div>

    <script>
        const modelSelect = document.getElementById('model-select');
        const androidSelect = document.getElementById('android-select');
        const scannerSelect = document.getElementById('scanner-select');
        const memorySelect = document.getElementById('memory-select');
        const buttonsSelect = document.getElementById('buttons-select');
        const handleSelect = document.getElementById('handle-select');
        const lteSelect = document.getElementById('lte-select');
        const frostSelect = document.getElementById('frost-select');
        const resultsDiv = document.getElementById('results');
        const notFoundMessage = document.getElementById('not-found');
        const resetFiltersButton = document.getElementById('reset-filters');
        const compareButton = document.getElementById('compare-button');
        const comparisonModal = document.getElementById('comparison-modal');
        const closeComparisonButton = comparisonModal.querySelector('.close-button');
        const comparisonItemsDiv = document.getElementById('comparison-items');
        const clearComparisonButton = document.getElementById('clear-button');
        const languageButtons = document.querySelectorAll('.language-switcher button');
        const skuSearchInput = document.getElementById('sku-search-input');
        const searchButton = document.getElementById('search-button');

        let data = [];
        let comparedItems = new Set();
        let currentLanguage = 'ru';
        let translations = {};
        let isSearchingBySKU = false;

        // Fetch JSON data and translations
        // ПРИМЕЧАНИЕ: Здесь я изменил путь, чтобы он был относительным к корню сайта
        fetch('SKUBD/SKU.json')
            .then(response => {
                if (!response.ok) {
                    throw new Error('Не удалось загрузить данные. Пожалуйста, проверьте правильность пути к файлу SKU.json');
                }
                return response.json();
            })
            .then(jsonData => {
                data = jsonData.SKU;
                translations = jsonData.translations;
                updateUIForLanguage(currentLanguage);
                updateFilterOptions();
                filterSKU();
            })
            .catch(error => {
                console.error('Ошибка загрузки данных:', error);
                notFoundMessage.textContent = `Ошибка: ${error.message}`;
                notFoundMessage.style.display = 'block';
            });
            
        function translateElement(elementId, key) {
            const element = document.getElementById(elementId);
            if (element && translations[currentLanguage] && translations[currentLanguage][key]) {
                element.textContent = translations[currentLanguage][key];
            }
        }
        
        function translatePlaceholder(elementId, key) {
            const element = document.getElementById(elementId);
            if (element && translations[currentLanguage] && translations[currentLanguage][key]) {
                element.placeholder = translations[currentLanguage][key];
            }
        }

        function updateUIForLanguage(lang) {
            currentLanguage = lang;
            document.querySelectorAll('[data-lang]').forEach(button => {
                button.classList.remove('active');
            });
            document.querySelector(`[data-lang="${lang}"]`).classList.add('active');
            
            translateElement('title', 'title');
            translateElement('subtitle', 'subtitle');
            translatePlaceholder('sku-search-input', 'search_placeholder');
            translateElement('search-button', 'search_button');
            translateElement('search-info', 'search_info');
            translateElement('model-label', 'model');
            translateElement('android-label', 'android');
            translateElement('scanner-label', 'scanner');
            translateElement('memory-label', 'memory');
            translateElement('buttons-label', 'buttons');
            translateElement('handle-label', 'handle');
            translateElement('lte-label', 'lte');
            translateElement('frost-label', 'frost');
            translateElement('reset-filters', 'reset_filters');
            translateElement('results-title', 'results');
            translateElement('not-found', 'no_results');
            translateElement('compare-button', 'compare');
            translateElement('comparison-title', 'comparison_title');
            translateElement('clear-button', 'clear');

            const allModelsOption = document.querySelector('#model-select option[value="all"]');
            if (allModelsOption) allModelsOption.textContent = translations[currentLanguage]['all_models'];
            const anyVersionOption = document.querySelector('#android-select option[value="any"]');
            if (anyVersionOption) anyVersionOption.textContent = translations[currentLanguage]['any_version'];
            const anyScannerOption = document.querySelector('#scanner-select option[value="any"]');
            if (anyScannerOption) anyScannerOption.textContent = translations[currentLanguage]['any_scanner'];
            const anyMemoryOption = document.querySelector('#memory-select option[value="any"]');
            if (anyMemoryOption) anyMemoryOption.textContent = translations[currentLanguage]['any_memory'];
            const anyCountOption = document.querySelector('#buttons-select option[value="any"]');
            if (anyCountOption) anyCountOption.textContent = translations[currentLanguage]['any_count'];
            const anyTypeOption = document.querySelector('#handle-select option[value="any"]');
            if (anyTypeOption) anyTypeOption.textContent = translations[currentLanguage]['any_type'];
            const notImportantLteOption = document.querySelector('#lte-select option[value="any"]');
            if (notImportantLteOption) notImportantLteOption.textContent = translations[currentLanguage]['not_important'];
            const hasLteOption = document.querySelector('#lte-select option[value="yes"]');
            if (hasLteOption) hasLteOption.textContent = translations[currentLanguage]['has_lte'];
            const noLteOption = document.querySelector('#lte-select option[value="no"]');
            if (noLteOption) noLteOption.textContent = translations[currentLanguage]['no_lte'];
            const notImportantFrostOption = document.querySelector('#frost-select option[value="any"]');
            if (notImportantFrostOption) notImportantFrostOption.textContent = translations[currentLanguage]['not_important'];
            const frostResistantOption = document.querySelector('#frost-select option[value="yes"]');
            if (frostResistantOption) frostResistantOption.textContent = translations[currentLanguage]['frost_resistant'];
            const notFrostResistantOption = document.querySelector('#frost-select option[value="no"]');
            if (notFrostResistantOption) notFrostResistantOption.textContent = translations[currentLanguage]['not_frost_resistant'];

            document.querySelectorAll('.add-to-compare, .remove-from-compare, .remove-button').forEach(button => {
                const isCompared = button.classList.contains('remove-from-compare') || button.classList.contains('remove-button');
                const key = isCompared ? 'remove_from_compare' : 'add_to_compare';
                if (translations[currentLanguage] && translations[currentLanguage][key]) {
                    button.textContent = translations[currentLanguage][key];
                }
            });
        }
        
        function updateFilterOptions() {
            const uniqueModels = [...new Set(data.map(item => item.model))].sort();
            const uniqueAndroids = [...new Set(data.map(item => item.android))].sort((a, b) => parseFloat(a) - parseFloat(b));
            const uniqueScanners = [...new Set(data.map(item => item.scanner))].sort();
            const uniqueMemories = [...new Set(data.map(item => item.memory))].sort((a, b) => parseInt(a) - parseInt(b));
            const uniqueButtons = [...new Set(data.map(item => item.buttons))].sort((a, b) => {
                if (a === "" || b === "") return 0;
                return parseInt(a) - parseInt(b);
            });
            const uniqueHandles = [...new Set(data.map(item => item.handle))].sort();

            function populateSelect(selectElement, options, includeAny = true) {
                selectElement.innerHTML = '';
                if (includeAny) {
                    const anyOption = document.createElement('option');
                    anyOption.value = 'any';
                    anyOption.textContent = translations[currentLanguage]['all_models']; // Use a general translation for "any"
                    selectElement.appendChild(anyOption);
                }
                options.forEach(option => {
                    if (option !== "" && option !== null) {
                        const optionElement = document.createElement('option');
                        optionElement.value = option;
                        optionElement.textContent = option;
                        selectElement.appendChild(optionElement);
                    }
                });
            }

            populateSelect(modelSelect, uniqueModels, true);
            populateSelect(androidSelect, uniqueAndroids, true);
            populateSelect(scannerSelect, uniqueScanners, true);
            populateSelect(memorySelect, uniqueMemories, true);
            populateSelect(buttonsSelect, uniqueButtons, true);
            populateSelect(handleSelect, uniqueHandles, true);

            // Special cases for LTE and Frost, which are yes/no filters
            function populateBooleanSelect(selectElement) {
                selectElement.innerHTML = `
                    <option value="any">${translations[currentLanguage]['not_important']}</option>
                    <option value="yes">${translations[currentLanguage]['has_lte']}</option>
                    <option value="no">${translations[currentLanguage]['no_lte']}</option>
                `;
            }

            if (data.some(item => item.lte === 'yes' || item.lte === 'no')) {
                populateBooleanSelect(lteSelect);
            } else {
                lteSelect.innerHTML = `<option value="any">${translations[currentLanguage]['not_important']}</option>`;
            }

            function populateFrostSelect(selectElement) {
                selectElement.innerHTML = `
                    <option value="any">${translations[currentLanguage]['not_important']}</option>
                    <option value="yes">${translations[currentLanguage]['frost_resistant']}</option>
                    <option value="no">${translations[currentLanguage]['not_frost_resistant']}</option>
                `;
            }

            if (data.some(item => item.frost === 'yes' || item.frost === 'no')) {
                populateFrostSelect(frostSelect);
            } else {
                frostSelect.innerHTML = `<option value="any">${translations[currentLanguage]['not_important']}</option>`;
            }
        }

        function displayResults(results) {
            resultsDiv.innerHTML = '';
            if (results.length === 0) {
                notFoundMessage.style.display = 'block';
            } else {
                notFoundMessage.style.display = 'none';
                results.forEach(item => {
                    const itemDiv = document.createElement('div');
                    itemDiv.className = 'result-item';
                    
                    const characteristics = Object.keys(item).filter(key => key !== 'sku').map(key => {
                        const translationKey = translations[currentLanguage][key] || key;
                        let value = item[key];
                        if (key === 'lte' && value === 'yes') value = translations[currentLanguage]['has_lte'];
                        if (key === 'lte' && value === 'no') value = translations[currentLanguage]['no_lte'];
                        if (key === 'frost' && value === 'yes') value = translations[currentLanguage]['frost_resistant'];
                        if (key === 'frost' && value === 'no') value = translations[currentLanguage]['not_frost_resistant'];

                        return `<p><strong>${translationKey}:</strong> ${value}</p>`;
                    }).join('');
                    
                    const buttonTextKey = comparedItems.has(item.sku) ? 'remove_from_compare' : 'add_to_compare';
                    const buttonClass = comparedItems.has(item.sku) ? 'remove-from-compare' : 'add-to-compare';

                    itemDiv.innerHTML = `
                        <div class="sku-label">${item.model} (${item.sku})</div>
                        <div class="characteristics">${characteristics}</div>
                        <div class="buttons-container">
                            <button class="${buttonClass}" data-sku="${item.sku}">${translations[currentLanguage][buttonTextKey]}</button>
                        </div>
                    `;
                    resultsDiv.appendChild(itemDiv);
                });
            }
        }
        
        function filterSKU() {
            if (isSearchingBySKU) {
                return;
            }

            const model = modelSelect.value;
            const android = androidSelect.value;
            const scanner = scannerSelect.value;
            const memory = memorySelect.value;
            const buttons = buttonsSelect.value;
            const handle = handleSelect.value;
            const lte = lteSelect.value;
            const frost = frostSelect.value;

            const filteredData = data.filter(item => {
                return (model === 'any' || item.model === model) &&
                       (android === 'any' || item.android === android) &&
                       (scanner === 'any' || item.scanner === scanner) &&
                       (memory === 'any' || item.memory === memory) &&
                       (buttons === 'any' || item.buttons === buttons) &&
                       (handle === 'any' || item.handle === handle) &&
                       (lte === 'any' || item.lte === lte) &&
                       (frost === 'any' || item.frost === frost);
            });
            displayResults(filteredData);
        }

        function searchBySKU() {
            const sku = skuSearchInput.value.trim().toUpperCase();
            if (sku === "") {
                isSearchingBySKU = false;
                filterSKU();
                return;
            }

            isSearchingBySKU = true;
            const foundItem = data.find(item => item.sku.toUpperCase() === sku);
            
            if (foundItem) {
                displayResults([foundItem]);
            } else {
                displayResults([]);
                notFoundMessage.textContent = translations[currentLanguage]['no_results'];
                notFoundMessage.style.display = 'block';
            }
        }

        function addToCompare(sku) {
            comparedItems.add(sku);
            updateCompareButtonText();
            updateResultsButtons();
        }

        function removeFromCompare(sku) {
            comparedItems.delete(sku);
            updateCompareButtonText();
            updateResultsButtons();
        }

        function updateResultsButtons() {
            const buttons = document.querySelectorAll('.add-to-compare, .remove-from-compare');
            buttons.forEach(button => {
                const sku = button.dataset.sku;
                if (comparedItems.has(sku)) {
                    button.classList.remove('add-to-compare');
                    button.classList.add('remove-from-compare');
                    button.textContent = translations[currentLanguage]['remove_from_compare'];
                    button.onclick = () => removeFromCompare(sku);
                } else {
                    button.classList.remove('remove-from-compare');
                    button.classList.add('add-to-compare');
                    button.textContent = translations[currentLanguage]['add_to_compare'];
                    button.onclick = () => addToCompare(sku);
                }
            });
        }
        
        function updateCompareButtonText() {
             compareButton.textContent = `${translations[currentLanguage]['compare']} (${comparedItems.size})`;
        }
        
        function displayComparison() {
            comparisonItemsDiv.innerHTML = '';
            if (comparedItems.size === 0) {
                comparisonItemsDiv.innerHTML = `<p>${translations[currentLanguage]['no_results']}</p>`;
            } else {
                const itemsToCompare = data.filter(item => comparedItems.has(item.sku));
                itemsToCompare.forEach(item => {
                    const itemDiv = document.createElement('div');
                    itemDiv.className = 'comparison-item';
                    
                    const characteristics = Object.keys(item).filter(key => key !== 'sku').map(key => {
                        const translationKey = translations[currentLanguage][key] || key;
                        let value = item[key];
                        if (key === 'lte' && value === 'yes') value = translations[currentLanguage]['has_lte'];
                        if (key === 'lte' && value === 'no') value = translations[currentLanguage]['no_lte'];
                        if (key === 'frost' && value === 'yes') value = translations[currentLanguage]['frost_resistant'];
                        if (key === 'frost' && value === 'no') value = translations[currentLanguage]['not_frost_resistant'];

                        return `<p><strong>${translationKey}:</strong> ${value}</p>`;
                    }).join('');

                    itemDiv.innerHTML = `
                        <h4>${item.model} (${item.sku})</h4>
                        ${characteristics}
                        <button class="remove-button" data-sku="${item.sku}">${translations[currentLanguage]['remove_from_compare']}</button>
                    `;
                    comparisonItemsDiv.appendChild(itemDiv);
                });
            }
            comparisonModal.style.display = "block";
        }
        
        function closeComparison() {
            comparisonModal.style.display = "none";
        }

        function clearComparison() {
            comparedItems.clear();
            updateCompareButtonText();
            updateResultsButtons();
            closeComparison();
        }

        // Event listeners
        languageButtons.forEach(button => {
            button.addEventListener('click', () => updateUIForLanguage(button.dataset.lang));
        });

        modelSelect.addEventListener('change', function() {
            isSearchingBySKU = false;
            filterSKU();
        });
        
        androidSelect.addEventListener('change', function() {
            isSearchingBySKU = false;
            filterSKU();
        });
        
        scannerSelect.addEventListener('change', function() {
            isSearchingBySKU = false;
            filterSKU();
        });
        
        memorySelect.addEventListener('change', function() {
            isSearchingBySKU = false;
            filterSKU();
        });
        
        buttonsSelect.addEventListener('change', function() {
            isSearchingBySKU = false;
            filterSKU();
        });
        
        handleSelect.addEventListener('change', function() {
            isSearchingBySKU = false;
            filterSKU();
        });
        
        lteSelect.addEventListener('change', function() {
            isSearchingBySKU = false;
            filterSKU();
        });
        
        frostSelect.addEventListener('change', function() {
            isSearchingBySKU = false;
            filterSKU();
        });

        resetFiltersButton.addEventListener('click', function() {
            isSearchingBySKU = false;
            modelSelect.value = 'any';
            androidSelect.value = 'any';
            scannerSelect.value = 'any';
            memorySelect.value = 'any';
            buttonsSelect.value = 'any';
            handleSelect.value = 'any';
            lteSelect.value = 'any';
            frostSelect.value = 'any';
            skuSearchInput.value = '';
            filterSKU();
        });
        
        searchButton.addEventListener('click', searchBySKU);
        
        resultsDiv.addEventListener('click', function(e) {
            if (e.target.classList.contains('add-to-compare')) {
                addToCompare(e.target.dataset.sku);
            } else if (e.target.classList.contains('remove-from-compare')) {
                removeFromCompare(e.target.dataset.sku);
            }
        });

        compareButton.addEventListener('click', displayComparison);
        
        closeComparisonButton.addEventListener('click', closeComparison);
        
        clearComparisonButton.addEventListener('click', clearComparison);
        
        comparisonItemsDiv.addEventListener('click', function(e) {
            if (e.target.classList.contains('remove-button')) {
                removeFromCompare(e.target.dataset.sku);
                displayComparison();
            }
        });
        
        skuSearchInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                searchBySKU();
            }
        });
        
        window.addEventListener('click', function(e) {
            if (e.target === comparisonModal) {
                closeComparison();
            }
        });
    </script>

</body>
</html>
